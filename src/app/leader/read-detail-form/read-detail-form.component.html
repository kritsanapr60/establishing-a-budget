<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-lg-12">
                <div class="card">
                    <div class="card-header card-header-danger">
                        <h4 class="card-title">รายละเอียดดโครงการ</h4>
                        <p class="card-category">ข้อมูลคำขอจัดตั้งครุภัณฑ์หลักและโครงการที่กำลังดำเนินการ ก่อนยืนยันข้อมูล
                        </p>
                    </div>
                    <div class="card-body table-responsive">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="detail">
                                    <mat-card>
                                        <h4>ข้อมูลผู้รับผิดชอบ</h4>
                                        <hr>
                                        <p>ชื่อ - นามสกุล : {{firstName}} {{lastName}}</p>
                                        <p>ตำแหน่ง : {{ position }}</p>
                                        <p>กลุ่มสาระการเรียนรู้ : {{ learningGroup }}</p>
                                    </mat-card>
                                    <br>
                                    <mat-card>
                                        <h4>คำขอตั้งงบประมาณ</h4>
                                        <hr>
                                        <p>เหตุผล : </p>
                                        <!-- <div class="panel-body" [innerHTML]="reason"></div> -->
                                        <p>{{reason}}</p>
                                        <p>วัตถุประสงค์ :</p>
                                        <!-- <div class="panel-body" [innerHTML]="objective"></div> -->
                                        <p>{{objective}}</p>
                                        <p>หัวข้อรายการหลัก : {{ majorList }}</p>
                                        <p>จำนวนงบประมาณที่จัดตั้ง : {{ budget }}</p>
                                    </mat-card>
                                    <br>

                                    <mat-card>
                                        <h4>ข้อมูลประกอบ</h4>
                                        <hr>
                                        <p>เกณฑ์ความจำเป็นที่ควรมี : {{ condition }}</p>
                                        <p>อุปกรณ์ที่มีอยู่ : {{ existEquipment }}</p>
                                        <p>เหตุผลเพิ่มเติม : {{ otherReason }}</p>
                                        <p>วันที่เอกสาร : {{dateProject | thaidate: "meduim"}}</p>
                                        <p>เงื่อไขการขอ : </p>
                                        <form [formGroup]="conditionValue">
                                            <mat-radio-group formControlName="condition">
                                                <mat-radio-button value="ขาดเเคลนตามเกณฑ์">ขาดเเคลนตามเกณฑ์
                                                </mat-radio-button>
                                                &nbsp;
                                                <mat-radio-button value="ทดแทนการจำหน่าย">ทดแทนการจำหน่าย
                                                </mat-radio-button>
                                            </mat-radio-group>
                                        </form>
                                    </mat-card>

                                    <br>
                                    <h4>รายการหลัก</h4>
                                    <table class="table table-hover table-striped">
                                        <thead class="thead-dark text-center">
                                            <!-- <th>ลำดับ</th> -->
                                            <!-- <th>ประเภท</th> -->
                                            <th>รายการครุภัณฑ์ / โครงการ</th>
                                            <th>จำนวนหน่วย</th>
                                            <th>งบประมาณครุภัณฑ์หลัก / โครงการหลัก</th>
                                            <th>งบประมาณครุภัณฑ์ย่อย / โครงการย่อย</th>
                                        </thead>
                                        <tbody class="text-center">
                                            <tr>
                                                <!-- <td>{{ listProject.no }}</td> -->
                                                <!-- <td>{{ listProject.type }}</td> -->
                                                <td>{{ majorList }}</td>
                                                <td>{{ necessary }}</td>
                                                <td>{{ budget }}</td>
                                                <td class="text-red">{{ existEquipment }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <br>
                                    <h4>รายการย่อย</h4>
                                    <table class="table table-hover table-striped">
                                        <thead class="thead-dark text-center">
                                            <th>รายการที่</th>
                                            <th>รายการครุภัณฑ์ย่อย</th>
                                            <th>ราคาต่อหน่วย</th>
                                            <th>จำนวนหน่วย</th>
                                            <th>งบประมาณ</th>
                                        </thead>
                                        <tbody class="text-center">
                                            <tr *ngFor="let listSub of subEquipmentList; let i = index">
                                                <td>{{ i + 1 }}</td>
                                                <td>{{ listSub.equipmentName }}</td>
                                                <td>{{ listSub.budgetPerPrice }}</td>
                                                <td>{{ listSub.unit }}</td>
                                                <td>{{ listSub.budget }}</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <div class="card" *ngIf="role !== 'ADMIN' && role !== 'USER'">
                                        <div class="card-body">
                                            <div class="card-title">
                                                <h4>อนุมัติเห็นชอบโครงการ</h4>
                                                <hr>
                                            </div>
                                            <form [formGroup]="formApprove">
                                                <div class="card-text">
                                                    ท่านเห็นชอบโครงการการจัดตั้งครุภัณฑ์...{{majorList}}...นี้หรือไม่
                                                    <br><br>
                                                    <mat-radio-group>
                                                        <div class="row">
                                                            <mat-radio-group formControlName="approveCondition">
                                                                <mat-radio-button value="อนุมัติเห็นชอบโครงการนี้">
                                                                    อนุมัติเห็นชอบโครงการนี้
                                                                </mat-radio-button>
                                                                &nbsp;
                                                                <mat-radio-button value="ไม่อนุมัติเห็นชอบโครงการนี้">
                                                                    ไม่อนุมัติเห็นชอบโครงการนี้
                                                                </mat-radio-button>
                                                                <mat-error *ngIf="formApprove.value.invalid">
                                                                    กรุณากรอกข้อมูล</mat-error>
                                                            </mat-radio-group>
                                                        </div>
                                                    </mat-radio-group>
                                                    <div class="container">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <hr>
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>เหตุผลเพิ่มเติม</mat-label>
                                                                    <textarea matInput rows="3" placeholder="เหตุผลประกอบการพิจารณา" formControlName="approveReason"></textarea>
                                                                    <mat-error *ngIf="formApprove.invalid">
                                                                        กรุณากรอกข้อมูล</mat-error>
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <b>ชื่อผู้อนุมัติโครงการ : {{fetchFirstName}}
                                                                    {{fetchLastName}}</b>
                                                                <br>
                                                                <b>หมายเหตุ :
                                                                </b>กรุณาตรวจสอบข้อมูลให้แน่ใจก่อนที่จะกดบันทึกข้อมูล เนื่องจากจะระบบจะส่งข้อมูลเข้าสู่กระบวนการถัดไป จึงไม่สามารถแก้ไขได้ในภายหลัง
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 text-center">
                                                        <button class="btn btn-success text-center" [disabled]="formApprove.invalid" (click)="approveProject()" type="button">บันทึกข้อมูลพร้อมรายงานการแจ้งเตือน</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>